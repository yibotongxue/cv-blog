---
head:
  - - link
    - rel: stylesheet
      href: https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css
---
# iMAP 介绍

这篇文章简单的介绍一下 iMAP ，主要根据[论文](https://arxiv.org/abs/2103.12352)和[知乎文章](https://zhuanlan.zhihu.com/p/487702125)。

:::details
如果搜索 iMAP ，可能会得到很多结果，但本文所讲的是实时隐式映射与定位这一 SLAM 领域的重要方法，而非其他的内容，如果我的标题导致你搜索其他 iMAP 内容时错误地造访本页面，很抱歉。
:::

## NeRF 简介

在介绍 iMAP 之前，我们先简单介绍一下 NeRF ，因为我们认为 iMAP 与 NeRF 有着密切的关系，理解 NeRF 对于理解 iMAP 有着重要的作用。这部分参考[论文](https://arxiv.org/abs/2003.08934)。

### 简介

NeRF 即神经辐射场，可以用来表示场景。在传统的计算机视觉和图形学中，常用的场景表示有点云表示、三角网格表示、体素表示等，一般都为离散的，对于解决新视角下物体等问题并不方便，且存储往往需要较大的空间；神经辐射场，则提出了一种连续的表达场景的方法，将场景建模为一个从三维坐标和视角方向到 RGB 颜色和体密度的映射，这个映射用 MLP 实现。

### 技术细节

关于其技术细节，这里简要介绍以下内容，参考了[书籍《三维视觉新范式：深度解析NeRF与3DGS技术》](https://book.douban.com/subject/37014639/)。

#### 位置编码

上面提到的 MLP 网络其输入一般不是直接的所提到的三维坐标和视角方向，而会拼接上其位置编码的输出，编码方法有许多，论文作者的方法包括从三维坐标和视角方向（拼接作一个向量）进行正余弦频域位置编码，而后续的发展则导致了更多的频域增其那个的方法。

#### MLP 网络结构

经过位置编码处理后，得到的输入特征会经过一个 MLP 网络，论文作者使用的是一个十层的全连接网络，并于第 $5$ 层与三维坐标的输入特征拼接，而第 $8$ 层的最后不再经过激活函数，直接进入下一层，第 $9$ 层则输出密度值，并联接方向信息，最后一层输出 RGB 颜色值。

#### 粗糙网络与精细网络

从粗糙到精细是计算机视觉中十分常用的一种方法。 NeRF 算法设计了分层采样的方法，设置粗糙网络和精细网络，以因应空间点分布的稀疏性。简单的介绍， NeRF 的粗糙网络通过均匀的采样得到空间点分布的先验，而精细网络因应于此在采样时对那些对渲染结果影响较大的区域进行更稠密的采样，训练阶段计算损失函数需要同时考虑两个网络的损失，以它们的加权和为总的损失。

#### 体渲染技术

通过 MLP 网络，我们可以查到任一视角观察任一三维点的颜色和体密度，所谓体渲染，即根据这些信息渲染得到图片。从理论的角度，我们可以通过沿光心发出的过像素的射线的积分得到，颜色表征射线上一处的强度，而其之前的体密度决定了其系数，从实际应用的角度，我们可以通过在射线上采样若干个点求解，考虑到三维点大部分为空白，我们可以使用从粗糙到精细的方法采样。

顺便一提的是，这里的体渲染构成了 NeRF 十分关键的一点，其突出的特征就是这个渲染过程是可微的，这使得后续的优化成为可能。
